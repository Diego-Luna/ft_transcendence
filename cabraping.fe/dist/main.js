(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var n;e.g.importScripts&&(n=e.g.location+"");var t=e.g.document;if(!n&&t&&(t.currentScript&&(n=t.currentScript.src),!n)){var a=t.getElementsByTagName("script");if(a.length)for(var s=a.length-1;s>-1&&!n;)n=a[s--].src}if(!n)throw new Error("Automatic publicPath is not supported in this browser");n=n.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=n})();const n=e.p+"bfdb41f3a4dfb0f1bc4688b51ebe9838.svg",t=()=>`\n      <div class="d-flex justify-content-between align-items-center p-3 bg-light">\n          \x3c!-- Left Menu --\x3e\n          <div class="d-flex">\n              <a href="#friends" class="m-5 text-dark text-decoration-none">Friends</a>\n              <a href="#chat" class="m-5 text-dark text-decoration-none">Chats</a>\n              <a href="#game" class="m-5 text-dark text-decoration-none">Games</a>\n          </div>\n\n          \x3c!-- Logo --\x3e\n          <div>\n            <a href="#" >\n                <img src="${n}" alt="Logo" style="height: 50px;">\n            </a>\n          </div>\n\n          \x3c!-- Right Menu --\x3e\n          <div>\n              <button class="btn btn-warning text-white">42 Auth</button>\n          </div>\n      </div>\n     `,a=()=>'\n    <div class="d-flex justify-content-center align-items-center p-3 bg-dark">\n        <span class="text-white">CabraPing. All rights reserved © 2023</span>\n    </div>\n  ',s=e.p+"f98c465cdaa51319739eadd988c0a8eb.png";const i=()=>location.hash.slice(1).toLocaleLowerCase().split("/")[1]||"/";let o,l="default",d="general";function c(){const e=document.getElementById("messageTextarea");if(e){const n=e.value;if(""!==n.trim()){let t={message:n,channel:d,UserName:l};o.send(JSON.stringify(t)),e.value="",r(n)}}}function r(e){const t=document.getElementById("messageList");if(t){const a=document.createElement("div");a.className="mb-3 d-flex align-items-start";const s=document.createElement("img");s.src=`${n}`,s.alt="User Image",s.className="rounded-circle mr-2",s.width=40;const i=document.createElement("div"),o=document.createElement("strong");o.textContent="Username";const l=document.createElement("p");l.textContent=e,i.appendChild(o),i.appendChild(l),a.appendChild(s),a.appendChild(i),t.appendChild(a)}}function h(){alert("Botón presionado!")}function m(){o||(o=new WebSocket("ws://127.0.0.1:8000/ws/chat/"),o.addEventListener("open",(e=>{})),o.addEventListener("message",(e=>{r(e.data)})));let e=i();"/"!=e&&(d=e);const n=document.getElementById("addChanel");n&&n.addEventListener("click",h);const t=document.getElementById("sendButton");t&&t.addEventListener("click",c);const a=document.getElementById("saveChannelButton");a&&a.addEventListener("click",(()=>{!function(e,n){fetch("http://127.0.0.1:8000/api/channels/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("jwt")}`},body:JSON.stringify({name:e,members:n})}).then((e=>e.json())).then((e=>{})).catch((e=>{}))}(document.getElementById("channelName").value,[...document.getElementById("channelMembers").options].filter((e=>e.selected)).map((e=>e.value)))}))}function u(){if(localStorage.getItem("jwt"))return`\n    <div class="d-flex h-100">\n       \x3c!-- Left Panel: Channels --\x3e\n       <div class="w-25 h-100 bg-light p-3">\n         <h3>Chat</h3>\n         <div class="mb-4">\n           <h4 class="d-flex justify-content-between">\n             Channels\n             <button id="addChanel"  class="btn btn-primary btn-sm">Add Channel</button>\n           </h4>\n           <ul class="list-unstyled">\n             <li class="mb-2"><a href="#chat/channel-alpha" class="text-decoration-none">#channel-alpha</a></li>\n             <li class="mb-2"><a href="#chat/channel-beta" class="text-decoration-none">#channel-beta</a></li>\n             <li class="mb-2"><a href="#chat/channel-charlie" class="text-decoration-none">#channel-charlie</a></li>\n           </ul>\n         </div>\n\n         <h4 class="d-flex justify-content-between">\n           Messages\n           <button id="addMessages" class="btn btn-primary btn-sm">Add Messages</button>\n         </h4>\n         <ul class="list-unstyled">\n           <li class="mb-2"><a href="#chat/username-a" class="text-decoration-none">username-a</a></li>\n           <li class="mb-2"><a href="#chat/username-b" class="text-decoration-none">username-b</a></li>\n           <li class="mb-2"><a href="#chat/username-c" class="text-decoration-none">username-c</a></li>\n         </ul>\n\n         <div class="mt-4 d-flex align-items-center">\n           <img src="${n}" alt="User Image" class="rounded-circle mr-2" width="40">\n           <div>\n             <strong>username</strong>\n             <button class="btn btn-link p-0">Logout</button>\n           </div>\n         </div>\n       </div>\n\n       \x3c!-- Middle Panel: Chat Messages --\x3e\n       <div class="w-75 h-100 bg-white p-3 overflow-auto">\n         <h3 class="mb-4">#channel-alpha</h3>\n\n         \x3c!-- Messages go here --\x3e\n         \x3c!-- Repeat for other messages --\x3e\n         \x3c!-- Lista de mensajes --\x3e\n          <ul id="messageList" class="list-unstyled">\n            \x3c!-- Aquí se agregarán los mensajes --\x3e\n          </ul>\n\n         \x3c!-- Textarea for new messages --\x3e\n         <div class="mt-3">\n           <textarea id="messageTextarea" class="form-control" rows="3"></textarea>\n           <button id="sendButton" class="btn btn-primary mt-2">Enviar</button>\n         </div>\n       </div>\n\n    </div>\n\n    \x3c!-- Modal para crear un nuevo canal --\x3e\n    <div class="modal" tabindex="-1" role="dialog" id="channelModal">\n      <div class="modal-dialog" role="document">\n        <div class="modal-content">\n          <div class="modal-header">\n            <h5 class="modal-title">Create Channel</h5>\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n              <span aria-hidden="true">&times;</span>\n            </button>\n          </div>\n          <div class="modal-body">\n            <input type="text" id="channelName" class="form-control mb-2" placeholder="Channel Name" required>\n            \x3c!-- Aquí deberías insertar la lógica para seleccionar usuarios --\x3e\n            <select multiple class="form-control" id="channelMembers">\n              \x3c!-- Opciones de usuarios se insertarán dinámicamente --\x3e\n            </select>\n          </div>\n          <div class="modal-footer">\n            <button type="button" id="saveChannelButton" class="btn btn-primary">Save Channel</button>\n            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n          </div>\n        </div>\n      </div>\n    </div>\n    `;window.location.href="/#"}function g(){}function f(){return'\n    <div class="Error404">\n      <h2>Error 404</h2>\n    </div>\n  '}const b={"/":[function(){return`\n  <div class="container mt-5">\n    <div class="row align-items-center">\n      \x3c!-- Imagen de Pong --\x3e\n      <div class="col-md-6">\n        <img src="${s}" alt="Pong Game" class="img-fluid">\n      </div>\n\n      \x3c!-- Descripción y Botón --\x3e\n      <div class="col-md-6">\n        <h1>CabraPing</h1>\n        <p class="lead">Classic Pong: Bounce to Victory! Can you outmatch your opponent in this timeless arcade game of skill and reflexes?</p>\n        <a href="path-to-authentication" class="btn btn-warning">42 Auth</a>\n        <a href="/#auth" class="btn btn-warning">Iniciar Sesión / Registrarse</a>\n      </div>\n    </div>\n  </div>\n  `},function(){}],"/game":[function(){return'\n    <div class="w-100 h-100 d-flex gap-4">\n      <h1>game</h1>\n      <div class="game-board">\n        <canvas width="750" height="585" id="game"></canvas>\n      </div>\n    </div>\n  '},function(){const e=new WebSocket("ws://127.0.0.1:8000/ws/game/");e.onopen=function(e){},e.onmessage=function(e){!function(e){e&&void 0!==e.rightPaddlePosition&&void 0!==e.leftPaddlePosition&&e.ballPosition&&(o.y=e.rightPaddlePosition,i.y=e.leftPaddlePosition,void 0!==e.ballPosition.x&&void 0!==e.ballPosition.y&&(l.x=e.ballPosition.x,l.y=e.ballPosition.y))}(JSON.parse(e.data).message)},e.onclose=function(e){e.wasClean},e.onerror=function(e){};const n=document.getElementById("game"),t=n.getContext("2d"),a=15,s=n.height-a-75;let i={x:30,y:n.height/2-37.5,width:a,height:75,dy:0},o={x:n.width-45,y:n.height/2-37.5,width:a,height:75,dy:0},l={x:n.width/2,y:n.height/2,width:a,height:a,resetting:!1,dx:5,dy:-5};function d(e,n){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}function c(){const n={rightPaddlePosition:o.y,leftPaddlePosition:i.y,ballPosition:{x:l.x,y:l.y}};e.send(JSON.stringify(n))}document.addEventListener("keydown",(function(e){38===e.which?o.dy=-6:40===e.which&&(o.dy=6),87===e.which?i.dy=-6:83===e.which&&(i.dy=6),c()})),document.addEventListener("keyup",(function(e){38!==e.which&&40!==e.which||(o.dy=0),83!==e.which&&87!==e.which||(i.dy=0),c()})),requestAnimationFrame((function e(){requestAnimationFrame(e),t.clearRect(0,0,n.width,n.height),i.y+=i.dy,o.y+=o.dy,i.y<a?i.y=a:i.y>s&&(i.y=s),o.y<a?o.y=a:o.y>s&&(o.y=s),t.fillStyle="white",t.fillRect(i.x,i.y,i.width,i.height),t.fillRect(o.x,o.y,o.width,o.height),l.x+=l.dx,l.y+=l.dy,l.y<a?(l.y=a,l.dy*=-1):l.y+a>n.height-a&&(l.y=n.height-30,l.dy*=-1),(l.x<0||l.x>n.width)&&!l.resetting&&(l.resetting=!0,setTimeout((()=>{l.resetting=!1,l.x=n.width/2,l.y=n.height/2}),400)),d(l,i)?(l.dx*=-1,l.x=i.x+i.width):d(l,o)&&(l.dx*=-1,l.x=o.x-l.width),t.fillRect(l.x,l.y,l.width,l.height),t.fillStyle="lightgrey",t.fillRect(0,0,n.width,a),t.fillRect(0,n.height-a,n.width,n.height);for(let e=a;e<n.height-a;e+=30)t.fillRect(n.width/2-7.5,e,a,a)}))}],"/chat":[u,m],"/auth":[function(){if(!localStorage.getItem("jwt"))return'\n    <div class="container mt-5">\n      <div class="row">\n        <div class="col-md-6">\n          \x3c!-- Login Form --\x3e\n          <form id="login-form">\n            <h2>Login</h2>\n            <div class="mb-3">\n              <label for="username" class="form-label">Username</label>\n              <input type="email" class="form-control" id="username" required>\n            </div>\n            <div class="mb-3">\n              <label for="password" class="form-label">Password</label>\n              <input type="password" class="form-control" id="password" required>\n            </div>\n            <button type="submit" class="btn btn-primary">Login</button>\n          </form>\n        </div>\n        <div class="col-md-6">\n          \x3c!-- Registration Form --\x3e\n          <form id="signup-form">\n            <h2>Create Account</h2>\n            \x3c!-- Add additional fields as per your user model --\x3e\n            <div class="mb-3">\n              <label for="new-username" class="form-label">Email</label>\n              <input type="email" class="form-control" id="new-username" required>\n            </div>\n            <div class="mb-3">\n              <label for="new-password" class="form-label">Password</label>\n              <input type="password" class="form-control" id="new-password" required>\n            </div>\n            <button type="submit" class="btn btn-success">Create Account</button>\n          </form>\n        </div>\n      </div>\n    </div>\n  ';window.location.href="/#"},function(){if(localStorage.getItem("jwt"))return void(window.location.href="/#");const e=document.getElementById("login-form"),n=document.getElementById("signup-form");e.addEventListener("submit",(e=>{e.preventDefault();!function(e,n){fetch("http://127.0.0.1:8000/api/token/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n})}).then((e=>{if(e.ok)return e.json();throw alert("Incorrect username or password"),new Error("Login failed")})).then((e=>{localStorage.setItem("jwt",e.access),window.location.href="/#"})).catch((e=>{}))}(document.getElementById("username").value,document.getElementById("password").value)})),n.addEventListener("submit",(e=>{e.preventDefault();!function(e,n){const t=e.split("@")[0];fetch("http://127.0.0.1:8000/api/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,email:e,password:n})}).then((e=>e.json())).then((e=>{})).catch((e=>{}))}(document.getElementById("new-username").value,document.getElementById("new-password").value)}))}],"/chat/:id":[u,m],"/user":[function(){return'\n    <div class="User" >\n        <h2> User </h2>\n    </div>\n  '},function(){}]},y=async()=>{let e,n;const s=document.getElementById("header"),o=document.getElementById("content"),l=document.getElementById("footer");s.innerHTML=await t(),l.innerHTML=await a();let d=location.hash.slice(1).toLocaleLowerCase().split("/");n="/"!=i()?`/${d[0]}/:id`:`/${d[0]}`,e=d.length>=1&&d.length<=2&&b[n]?b[`/${d[0]}`]:[f,g],o.innerHTML=await e[0]();for(let n=1;n<e.length;n++)await e[n]()};window.addEventListener("load",y),window.addEventListener("hashchange",y)})();